# MiniTelemetry v1.0

MiniTelemetry is a lightweight UDP-based telemetry protocol designed for efficient
collection of sensor data from distributed IoT devices.  
It provides basic reliability features such as acknowledgments, retransmissions,
duplicate detection, and packet reorderingâ€”without the overhead of TCP-based protocols
like MQTT or CoAP.

---

## ðŸš€ Features

- UDP-based communication with minimal overhead
- Batched telemetry readings per packet
- Sequence numbers for duplicate and gap detection
- ACK-based retransmission for reliability
- Heartbeat messages for liveness detection
- Reordering buffer to handle out-of-order packets
- CSV-based persistent storage on the server
- Network loss and delay evaluation using Linux `netem`

---

## ðŸ“¡ Protocol Overview

**Protocol Name:** MiniTelemetry  
**Version:** 1.0  
**Transport:** UDP  
**Default Report Interval:** 2 seconds  
**Heartbeat Interval:** 5 seconds  
**Max Packet Size:** ~2 KB  

### Entities

- **Client / Device**
  - Sends INIT, DATA, and HEARTBEAT messages
  - Maintains sequence numbers and retransmits unacknowledged packets

- **Server**
  - Receives and validates packets
  - Detects duplicates and sequence gaps
  - Buffers and reorders readings
  - Logs telemetry data to CSV
  - Sends ACKs

---

## ðŸ”„ Message Types

| Type | Value | Description |
|----|----|----|
| INIT | 0 | Device registration |
| DATA | 1 | Batched telemetry readings |
| HEARTBEAT | 2 | Liveness check |
| ACK | 3 | Acknowledgment |

---

## ðŸ§± Message Format

### Header (12 bytes)

| Field | Size | Description |
|----|----|----|
| Version | 4 bits | Protocol version |
| MsgType | 4 bits | Message type |
| DeviceID | 16 bits | Unique device identifier |
| SeqNum | 16 bits | Sequence number |
| Timestamp | 32 bits | Unix epoch |
| BatchCnt | 8 bits | Number of readings |
| Padding | 16 bits | Alignment |

### Payload (per reading â€“ 12 bytes)

| Field | Size |
|----|----|
| Temperature | 32 bits |
| Humidity | 32 bits |
| Reading Timestamp | 32 bits |

---

## ðŸ§ª Reliability Mechanisms

- **ACKs:** Every DATA packet is acknowledged
- **Retransmission:** Timeout-based (3 seconds)
- **Duplicate Detection:** `SeqNum <= last_seq`
- **Gap Detection:** `SeqNum - last_seq > 1`
- **Reordering Buffer:** 250 ms window before CSV write

---

## ðŸ“Š Metrics Collected

- Bytes per report
- Packets received
- Duplicate rate
- Sequence gap count
- CPU time per report

---

## ðŸ§ª Experimental Evaluation

Network conditions were simulated using Linux `tc/netem`.

### Baseline
